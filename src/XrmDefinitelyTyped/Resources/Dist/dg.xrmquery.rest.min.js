var Filter;
(function(e){(function(c){function d(a){return null==a?"null":"string"===typeof a?"'"+a+"'":"[object Date]"===Object.prototype.toString.call(a)?"DateTime'"+a.format("yyyy-MM-ddTHH:mm:ss")+"'":a.toString()}function k(a,b,f){return d(a)+" "+b+" "+d(f)}function g(a,b,f){return a+"("+d(b)+", "+d(f)+")"}function e(a,b){var f=a.pop();return a.reduceRight(function(a,f){return"("+f+" "+b+" "+a+")"},f)}c.equals=function(a,b){return k(a,"eq",b)};c.notEquals=function(a,b){return k(a,"ne",b)};c.greaterThan=function(a,
b){return k(a,"gt",b)};c.greaterThanOrEqual=function(a,b){return k(a,"ge",b)};c.lessThan=function(a,b){return k(a,"lt",b)};c.lessThanOrEqual=function(a,b){return k(a,"le",b)};c.and=function(a,b){return"("+a+" and "+b+")"};c.or=function(a,b){return"("+a+" or "+b+")"};c.not=function(a){return"not "+a};c.ands=function(a){return e(a,"and")};c.ors=function(a){return e(a,"or")};c.startsWith=function(a,b){return g("startswith",a,b)};c.substringOf=function(a,b){return g("substringof",a,b)};c.endsWith=function(a,
b){return g("endswith",a,b)};c.makeGuid=function(a){return XQR.makeTag("(guid'"+a+"')")}})(e.REST||(e.REST={}))})(Filter||(Filter={}));var XrmQuery;
(function(e){(function(c){c.retrieveRecord=function(d,c){return new XQR.RetrieveRecord(d,c)};c.retrieveMultipleRecords=function(d){return new XQR.RetrieveMultipleRecords(d)};c.createRecord=function(d,c){return new XQR.CreateRecord(d,c)};c.updateRecord=function(d,c,g){return new XQR.UpdateRecord(d,c,g)};c.deleteRecord=function(c,e){return new XQR.DeleteRecord(c,e)}})(e.REST||(e.REST={}))})(XrmQuery||(XrmQuery={}));var XQR;
(function(e){function c(a){return{__str:a,toString:function(){return this.__str}}}function d(a){var b=a.toString().match(k);if(!b)throw Error("XrmQuery: Unable to properly parse function: "+a.toString());var f=b[1];b=b[2];f=new RegExp("\\b"+f+"\\.([a-zA-Z_$][0-9a-zA-Z_$]*)(\\.([a-zA-Z_$][0-9a-zA-Z_$]*))?","g");for(var d={},e;null!=(e=f.exec(b));)d[e[1]]||(d[e[1]]=c(e[1])),e[3]&&(d[e[1]][e[3]]=c(e[1]+"/"+e[3]));return a(d)}e.makeTag=c;var k=/function[^\(]*\(([a-zA-Z0-9_]+)[^\{]*\{([\s\S]*)\}$/m,g=
function(){},h=function(){function a(b,a){this.selects=[];this.expands=[];this.logicalName=d(b).toString();this.id=a}a.prototype.select=function(b){this.selects=this.selects.concat(d(b));return this};a.prototype.expand=function(b,a){var f=d(b).toString();this.expands.push(f);a&&(this.selects=this.selects.concat(d(a).map(function(b){return f+"."+b})));return this};a.prototype.execute=function(b,a){SDK.REST.retrieveRecord(this.id,this.logicalName,0<this.selects.length?this.selects.join(","):null,0<
this.expands.length?this.expands.join(","):null,b,a?a:g)};return a}();e.RetrieveRecord=h;h=function(){function a(b){this.selects=[];this.expands=[];this.ordering=[];this.topAmount=this.skipAmount=null;this.logicalName=d(b).toString()}a.prototype.select=function(b){this.selects=this.selects.concat(d(b));return this};a.prototype.expand=function(b,a){var f=d(b).toString();this.expands.push(f);a&&(this.selects=this.selects.concat(d(a).map(function(b){return f+"/"+b})));return this};a.prototype.filter=
function(b){this.filters=d(b);return this};a.prototype.orFilter=function(b){this.filters?this.filters=Filter.REST.or(this.filters,d(b)):this.filter(b);return this};a.prototype.andFilter=function(b){this.filters?this.filters=Filter.REST.and(this.filters,d(b)):this.filter(b);return this};a.prototype.order=function(b,a){this.ordering.push(d(b)+" "+a);return this};a.prototype.orderAsc=function(b){return this.order(b,"asc")};a.prototype.orderDesc=function(b){return this.order(b,"desc")};a.prototype.skip=
function(b){this.skipAmount=b;return this};a.prototype.top=function(b){this.topAmount=b;return this};a.prototype.execute=function(b,a,c){SDK.REST.retrieveMultipleRecords(this.logicalName,this.getOptionString(),b,a,c)};a.prototype.getAll=function(b,a){var c=[];SDK.REST.retrieveMultipleRecords(this.logicalName,this.getOptionString(),function(a){c.push(a)},a?a:g,function(){b([].concat.apply([],c))})};a.prototype.getFirst=function(a,c){this.top(1);this.execute(function(b){return a(0<b.length?b[0]:null)},
c?c:g,g)};a.prototype.getOptionString=function(){var a=[];0<this.selects.length&&a.push("$select="+this.selects.join(","));0<this.expands.length&&a.push("$expand="+this.expands.join(","));this.filters&&a.push("$filter="+this.filters);0<this.ordering.length&&a.push("$orderby="+this.ordering.join(","));null!=this.skipAmount&&a.push("$skip="+this.skipAmount);null!=this.topAmount&&a.push("$top="+this.topAmount);return a.join("&")};return a}();e.RetrieveMultipleRecords=h;h=function(){function a(a,c){this.logicalName=
d(a).toString();this.record=c}a.prototype.execute=function(a,c){SDK.REST.createRecord(this.record,this.logicalName,a?a:g,c?c:g)};return a}();e.CreateRecord=h;h=function(){function a(a,c,e){this.logicalName=d(a).toString();this.id=c;this.record=e}a.prototype.execute=function(a,c){SDK.REST.updateRecord(this.id,this.record,this.logicalName,a?a:g,c?c:g)};return a}();e.UpdateRecord=h;h=function(){function a(a,c){this.logicalName=d(a).toString();this.id=c}a.prototype.execute=function(a,c){SDK.REST.deleteRecord(this.id,
this.logicalName,a?a:g,c?c:g)};return a}();e.DeleteRecord=h})(XQR||(XQR={}));
