var $jscomp={scope:{},checkStringArgs:function(a,f,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,f,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[f]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,f,d,b){if(f){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var l=a[b];l in d||(d[l]={});d=d[l]}a=a[a.length-1];b=d[a];f=f(b);f!=b&&null!=f&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,d){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var f=b.length,g=a.length,m=Math.max(0,Math.min(d|0,b.length)),p=0;p<g&&m<f;)if(b[m++]!=a[p++])return!1;return p>=g}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,d){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===d&&(d=b.length);for(var f=Math.max(0,Math.min(d|0,b.length)),g=a.length;0<g&&0<f;)if(b[--f]!=a[--g])return!1;return 0>=g}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(a){var f=0;return $jscomp.iteratorPrototype(function(){return f<a.length?{done:!1,value:a[f++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(a,f){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,b={next:function(){if(d<a.length){var l=d++;return{value:f(l,a[l]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
var __extends=this&&this.__extends||function(a,f){function d(){this.constructor=a}for(var b in f)f.hasOwnProperty(b)&&(a[b]=f[b]);a.prototype=null===f?Object.create(f):(d.prototype=f.prototype,new d)},Filter;
(function(a){function f(a){return null==a?"null":"string"===typeof a?"'"+a+"'":a instanceof Date?a.toISOString():a.toString()}function d(a,b,d){return f(a)+" "+b+" "+f(d)}function b(a,b,d){return a+"("+f(b)+", "+f(d)+")"}function l(a,b){var g=a.pop();return a.reduceRight(function(a,g){return"("+g+" "+b+" "+a+")"},g)}a.equals=function(a,b){return d(a,"eq",b)};a.notEquals=function(a,b){return d(a,"ne",b)};a.greaterThan=function(a,b){return d(a,"gt",b)};a.greaterThanOrEqual=function(a,b){return d(a,
"ge",b)};a.lessThan=function(a,b){return d(a,"lt",b)};a.lessThanOrEqual=function(a,b){return d(a,"le",b)};a.and=function(a,b){return"("+a+" and "+b+")"};a.or=function(a,b){return"("+a+" or "+b+")"};a.not=function(a){return"not "+a};a.ands=function(a){return l(a,"and")};a.ors=function(a){return l(a,"or")};a.startsWith=function(a,d){return b("startswith",a,d)};a.substringOf=function(a,d){return b("substringof",a,d)};a.endsWith=function(a,d){return b("endswith",a,d)};a.makeGuid=function(a){return XQW.makeTag(a)}})(Filter||
(Filter={}));var XrmQuery;
(function(a){function f(a,d,f,m,p,r){var b=new XMLHttpRequest;b.open(a,d,!0);b.setRequestHeader("Accept","application/json");b.setRequestHeader("Content-Type","application/json; charset=utf-8");b.setRequestHeader("OData-MaxVersion","4.0");b.setRequestHeader("OData-Version","4.0");r&&r(b);b.onreadystatechange=function(){4==this.readyState&&(b.onreadystatechange=null,200==this.status||204==this.status?m(this):p(Error(this.response)))};b.send(f)}function d(a,d,g,m,p,r){f(a,encodeURI(XQW.getApiUrl()+
d),g,m,p,r)}a.setApiUrl=function(a){XQW.ApiUrl=a};a.setApiVersion=function(a){XQW.ApiUrl=XQW.getDefaultUrl(a)};a.retrieveMultiple=function(a){return XQW.RetrieveMultipleRecords.Get(a)};a.retrieveRelated=function(a,d,f){return XQW.RetrieveRecord.Related(a,d,f)};a.retrieveRelatedMultiple=function(a,d,f){return XQW.RetrieveMultipleRecords.Related(a,d,f)};a.retrieve=function(a,d){return XQW.RetrieveRecord.Get(a,d)};a.create=function(a,d){return new XQW.CreateRecord(a,d)};a.update=function(a,d,f){return new XQW.UpdateRecord(a,
d,f)};a.deleteRecord=function(a,d){return new XQW.DeleteRecord(a,d)};a.request=f;a.sendCbRequest=d;a.sendRequest=function(a,f,g,m){if(!Promise)throw Error("Promises are not natively supported in this browser. Add a polyfill to use it.");return new Promise(function(b,l){d(a,f,g,b,l,m)})}})(XrmQuery||(XrmQuery={}));var XQW;
(function(a){function f(a,c){if(r.test(c))return new Date(c);var e=a,h;(h="@OData.Community.Display.V1.FormattedValue"==e.substr(-42))&&(e=e.substr(0,e.length-42));var k;if(k="_"==e.substr(0,1))k="_value"==e.substr(-6);k&&(e=e.substr(1,e.length-7),h||(e+="_guid"));h&&(e+="_formatted");if(e!=a)this[e]=c;else return c}function d(a){if(!Promise)throw Error("Promises are not natively supported in this browser. Add a polyfill to use it.");return new Promise(function(c,e){a(c,e)})}function b(b){var c,e;
e=b.toString().match(v);if(!e)throw Error("XrmQuery: Unable to properly parse function: "+b.toString());c=e[1];e=e[2];c=new RegExp("\\b"+c+"\\.([a-zA-Z_$][0-9a-zA-Z_$]*)(\\.([a-zA-Z_$][0-9a-zA-Z_$]*))?","g");for(var h={},k;null!=(k=c.exec(e));)h[k[1]]||(h[k[1]]=a.makeTag(k[1])),k[3]&&(h[k[1]][k[3]]=a.makeTag(k[1]+"/"+k[3]));return b(h)}function l(a){var c;if(GetGlobalContext&&GetGlobalContext().getClientUrl)c=GetGlobalContext().getClientUrl();else if(Xrm&&Xrm.Page&&Xrm.Page.context)try{c=Xrm.Page.context.getClientUrl()}catch(e){throw Error("Xrm.Page.context.getClientUrl is not available.");
}else throw Error("Context is not available.");return c+("/api/data/v"+a+"/")}function g(a){return b(a).map(function(a){a=a.toString();var e=a.indexOf("_guid");a=-1==e?a:"_"+a.substr(0,e)+"_value";return a})}function m(a){if(a instanceof Object){var c={};Object.keys(a).forEach(function(e){var k=m(a[e]),b=e.indexOf("_bind$");if(0<=b){var h=e.substr(b+6);c[e.substr(0,b)+"@odata.bind"]="/"+h+"("+k+")"}else c[e]=k});return c}if(a instanceof Array){var e=[];a.forEach(function(a,c){return e[c]=m(a)});return e}return a}
var p={type:"Prefer",value:'odata.include-annotations="OData.Community.Display.V1.FormattedValue"'};a.makeTag=function(a){return{__str:a,toString:function(){return this.__str}}};var r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/,n=function(){function a(a,e,b){var c=this;this.toReturn=a;this.successCallback=e;this.errorCallback=b;this.missingCallbacks=0;this.isDoingWork=this.isDoneSending=!1;this.callbackReceived=function(){c.missingCallbacks--;c.allSent&&0==c.missingCallbacks&&c.successCallback(c.toReturn)}}
a.prototype.followLink=function(a,e,b){var c=this;this.performingCallback();XrmQuery.request("GET",a,null,function(a){a=JSON.parse(a.response,f);t.followLinks(a,e,function(a){b(a);c.callbackReceived()},c.errorCallback)},function(a){c.callbackReceived();c.errorCallback(a)})};a.prototype.populateRecord=function(a,e){this.performingCallback();u.followLinks(a,e,this.callbackReceived,this.errorCallback)};a.prototype.allSent=function(){if(!this.isDoingWork)return this.successCallback(this.toReturn);this.isDoneSending=
!0};a.prototype.performingCallback=function(){this.missingCallbacks++;this.isDoingWork=!0};return a}(),u=function(a){function c(e,c,b,d){var h=a.call(this,e,b,d)||this;c.forEach(function(a){var c=e[a.linkKey];c&&(delete e[a.linkKey],h.followLink(c,[],function(c){e[a.arrKey]=e[a.arrKey].concat(c)}))});h.allSent();return h}__extends(c,a);c.followLinks=function(a,b,k,d){if(0==b.length)return k(a);0<b.length&&"string"===typeof b[0]&&(b=b.map(function(a){return{arrKey:a,linkKey:a+"@odata.nextLink"}}));
return new c(a,b,k,d)};return c}(n),t=function(a){function c(e,c,b,d){var h=a.call(this,e.value,b,d)||this;(b=e["@odata.nextLink"])&&h.followLink(b,c,function(a){h.toReturn=h.toReturn.concat(a)});0<c.length&&e.value.forEach(function(a){return h.populateRecord(a,c)});h.allSent();return h}__extends(c,a);c.followLinks=function(a,b,d,f){if(!a["@odata.nextLink"]&&(0==a.value.length||0==b.length))return d(a.value);if(0==b.length)return new c(a,[],d,f);0<b.length&&"string"===typeof b[0]&&(b=b.map(function(a){return{arrKey:a,
linkKey:a+"@odata.nextLink"}}));if(0==a.value.length)return new c(a,b,d,f);var e=a.value[0];b=b.filter(function(a){return e[a.linkKey]});return new c(a,b,d,f)};return c}(n),n=function(){function a(a){this.requestType=a;this.additionalHeaders=[];this.getObjectToSend=function(){return null}}a.prototype.promise=function(){return d(this.execute)};a.prototype.execute=function(a,e){void 0===e&&(e=function(){});this._executeRaw(a,e,!0)};a.prototype._executeRaw=function(a,e,b){var c=this;void 0===e&&(e=function(){});
void 0===b&&(b=!1);return XrmQuery.sendCbRequest(this.requestType,this.getQueryString(),this.getObjectToSend(),function(d){return b?c.handleResponse(d,a,e):a(d)},e,function(a){return c.additionalHeaders.forEach(function(e){return a.setRequestHeader(e.type,e.value)})})};return a}();a.Query=n;var q=function(a){function c(e,b,c){var d=a.call(this,"GET")||this;d.entitySetName=e;d.id=b;d.relatedNav=c;d.selects=[];d.expands=[];d.expandKeys=[];d.ordering=[];d.skipAmount=null;d.topAmount=null;return d}__extends(c,
a);c.Get=function(a){return new c(b(a).toString())};c.Related=function(a,d,k){return new c(b(a).toString(),d,b(k).toString())};c.prototype.handleResponse=function(a,b,c){t.followLinks(JSON.parse(a.response,f),this.expandKeys,b,c)};c.prototype.getFirst=function(a,b){this.top(1);this.execute(function(e){return a(e&&0<e.length?e[0]:null)},b)};c.prototype.promiseFirst=function(){return d(this.getFirst)};c.prototype.getQueryString=function(){var a=[];0<this.selects.length&&a.push("$select="+this.selects.join(","));
0<this.expands.length&&a.push("$expand="+this.expands.join(","));this.filters&&a.push("$filter="+this.filters);0<this.ordering.length&&a.push("$orderby="+this.ordering.join(","));null!=this.skipAmount&&a.push("$skip="+this.skipAmount);null!=this.topAmount&&a.push("$top="+this.topAmount);var b=this.entitySetName;this.id&&this.relatedNav&&(b+="("+this.id+")/"+this.relatedNav);return b+(0<a.length?"?"+a.join("&"):"")};c.prototype.select=function(a){this.selects=g(a);return this};c.prototype.selectMore=
function(a){this.selects=this.selects.concat(g(a));return this};c.prototype.expand=function(a,c){var e=b(a).toString();this.selects.push(e);this.expandKeys.push(e);var d=[];c&&d.push("$select="+g(c));this.expands.push(e+(0<d.length?"("+d.join(";")+")":""));return this};c.prototype.filter=function(a){this.filters=b(a);return this};c.prototype.orFilter=function(a){this.filters?this.filters=Filter.or(this.filters,b(a)):this.filter(a);return this};c.prototype.andFilter=function(a){this.filters?this.filters=
Filter.and(this.filters,b(a)):this.filter(a);return this};c.prototype.order=function(a,c){this.ordering.push(b(a)+" "+c);return this};c.prototype.orderAsc=function(a){return this.order(a,"asc")};c.prototype.orderDesc=function(a){return this.order(a,"desc")};c.prototype.skip=function(a){this.skipAmount=a;return this};c.prototype.top=function(a){this.topAmount=a;return this};c.prototype.includeFormattedValues=function(){this.additionalHeaders.push(p);return this};c.prototype.maxPageSize=function(a){this.additionalHeaders.push({type:"Prefer",
value:"odata.maxpagesize="+a});return this};return c}(n);a.RetrieveMultipleRecords=q;q=function(a){function c(b,c,d){var e=a.call(this,"GET")||this;e.entitySetName=b;e.id=c;e.relatedNav=d;e.selects=[];e.expands=[];e.expandKeys=[];return e}__extends(c,a);c.Related=function(a,d,f){return new c(b(a).toString(),d,b(f).toString())};c.Get=function(a,d){return new c(b(a).toString(),d)};c.prototype.handleResponse=function(a,b,c){u.followLinks(JSON.parse(a.response,f),this.expandKeys,b,c)};c.prototype.select=
function(a){this.selects=g(a);return this};c.prototype.selectMore=function(a){this.selects=this.selects.concat(g(a));return this};c.prototype.expand=function(a,c,d){a=b(a).toString();this.selects.push(a);this.expandKeys.push(a);var e=[];c&&e.push("$select="+g(c));d&&(d.top&&e.push("$top="+d.top),d.orderBy&&e.push("$orderby="+b(d.orderBy)+" "+(2!=d.sortOrder?"asc":"desc")),d.filter&&e.push("$filter="+b(d.filter)));this.expands.push(a+(0<e.length?"("+e.join(";")+")":""));return this};c.prototype.getQueryString=
function(){var a=[];0<this.selects.length&&a.push("$select="+this.selects.join(","));0<this.expands.length&&a.push("$expand="+this.expands.join(","));var b=this.entitySetName+"("+this.id+")";this.relatedNav&&(b+="/"+this.relatedNav);return b+(0<a.length?"?"+a.join("&"):"")};c.prototype.includeFormattedValues=function(){this.additionalHeaders.push(p);return this};return c}(n);a.RetrieveRecord=q;q=function(a){function c(c,d){var e=a.call(this,"POST")||this;e.record=d;e.getObjectToSend=function(){return JSON.stringify(m(e.record))};
e.entitySetName=b(c).toString();return e}__extends(c,a);c.prototype.handleResponse=function(a,b,c){(a=a.getResponseHeader("OData-EntityId"))?b(a.substr(-37,36)):c(Error("No valid OData-EntityId found in header."))};c.prototype.setData=function(a){this.record=a;return this};c.prototype.getQueryString=function(){return this.entitySetName};return c}(n);a.CreateRecord=q;q=function(a){function c(c,d){var e=a.call(this,"DELETE")||this;e.id=d;e.entitySetName=b(c).toString();return e}__extends(c,a);c.prototype.handleResponse=
function(a,b){b()};c.prototype.setId=function(a){this.id=a;return this};c.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};return c}(n);a.DeleteRecord=q;n=function(a){function c(c,d,f){var e=a.call(this,"PATCH")||this;e.id=d;e.record=f;e.getObjectToSend=function(){return JSON.stringify(m(e.record))};e.entitySetName=b(c).toString();return e}__extends(c,a);c.prototype.handleResponse=function(a,b){b()};c.prototype.setData=function(a,b){this.id=a;this.record=b;return this};
c.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};return c}(n);a.UpdateRecord=n;var v=/function[^\(]*\(([a-zA-Z0-9_]+)[^\{]*\{([\s\S]*)\}$/m;a.ApiUrl=null;a.getDefaultUrl=l;a.getApiUrl=function(){null===a.ApiUrl&&(a.ApiUrl=l("8.0"));return a.ApiUrl}})(XQW||(XQW={}));
